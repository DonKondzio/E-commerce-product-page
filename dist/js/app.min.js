"use strict";var navMobileBars=document.querySelector(".nav__mobile-bars"),navMobileClose=document.querySelector(".nav__mobile-close"),navMobile=document.querySelector(".nav__mobile"),navMobilePanel=document.querySelector(".nav__mobile-panel"),sliderImg=document.getElementsByClassName("slider-img")[0],sliderArrowLeft=document.querySelector(".slider-arrow--left"),sliderArrowRight=document.querySelector(".slider-arrow--right"),allThumbnails=document.querySelectorAll(".thumbnail"),shadow=document.querySelector(".shadow"),largeSlider=document.querySelector(".slider-large-container"),largeSliderImg=document.querySelector(".slider-large-img"),largeSliderArrowLeft=document.querySelector(".slider-large-arrow--left"),largeSliderArrowRight=document.querySelector(".slider-large-arrow--right"),largeSliderClose=document.querySelector(".slider-large-close"),allLargeSliderThumbnails=document.querySelectorAll(".slider-large-thumbnails .thumbnail"),cart=document.querySelector(".cart"),navCartBtn=document.querySelector(".nav__cart"),addToCartBtn=document.querySelector(".btn-cart"),countPlusBtn=document.querySelector(".count-btn--plus"),countMinusBtn=document.querySelector(".count-btn--minus"),productsToAddDisplay=document.querySelector(".count"),cartCountNum=document.querySelector(".count-number"),productCount=document.querySelector(".product-count"),productPrice=document.querySelector(".price"),totalPrice=document.querySelector(".total-price"),deleteBtn=document.querySelector(".cart-filled-upper-trash"),currentPhotoNum=1,productsToAdd=0,productsAdded=0,animationInProgress=!1,handleMobileNav=function(){animationInProgress=!0,navMobileBars.classList.toggle("animate-spin"),navMobileClose.classList.toggle("animate-spin"),navMobile.classList.toggle("active"),navMobilePanel.classList.toggle("animate-slide"),setTimeout(function(){navMobileBars.classList.toggle("active"),navMobileClose.classList.toggle("active"),animationInProgress=!1},300)},swipePhotoLeft=function(e){0===--currentPhotoNum&&(currentPhotoNum=4),e.setAttribute("style","background-image: url(dist/img/image-product-".concat(currentPhotoNum,".jpg)"))},swipePhotoRight=function(e){5===++currentPhotoNum&&(currentPhotoNum=1),e.setAttribute("style","background-image: url(dist/img/image-product-".concat(currentPhotoNum,".jpg)"))},displaySelectedThumbnail=function(){console.log(document.querySelector(".thumbnail:focus"))},setDisplayedImg=function(e){e.url},changePhoto=function(r){allThumbnails.forEach(function(e,t){for(var o=0;o<4;o++)allThumbnails[o]===r.target.parentElement&&(sliderImg.setAttribute("style","background-image: url(dist/img/image-product-".concat(o+1,".jpg)")),currentPhotoNum=o+1)})},changePhotoLightbox=function(r){allLargeSliderThumbnails.forEach(function(e,t){for(var o=0;o<4;o++)allLargeSliderThumbnails[o]===r.target.parentElement&&largeSliderImg.setAttribute("style","background-image: url(dist/img/image-product-".concat(o+1,".jpg)"))})},changeCountToAdd=function(e){"-"===e&&0!==productsToAdd?productsToAdd--:"+"===e&&productsToAdd++,productsToAddDisplay.textContent=productsToAdd},addToCart=function(){productsAdded+=productsToAdd,productsToAdd=0,(productsToAddDisplay.textContent=0)<productsAdded&&(cart.classList.add("filled"),productCount.textContent=productsAdded,totalPrice.textContent="$".concat(+productPrice.textContent.substring(1)*productsAdded,".00"),cartCountNum.classList.add("active"),cartCountNum.textContent=productsAdded)},deleteProducts=function(){productsAdded=0,cart.classList.remove("filled")},switchCartFilled=function(){cart.classList.toggle("filled"),console.log("dupa")},switchCart=function(){cart.classList.toggle("active"),navCartBtn.classList.add("animate-pulse"),setTimeout(function(){navCartBtn.classList.remove("animate-pulse")},300)},showLightbox=function(){largeSlider.classList.add("active"),largeSliderImg.style.backgroundImage=" url(dist/img/image-product-".concat(currentPhotoNum,".jpg)")},hideLightbox=function(){largeSlider.classList.remove("active")};allThumbnails.forEach(function(e){e.addEventListener("click",changePhoto)}),shadow.addEventListener("click",hideLightbox),largeSliderClose.addEventListener("click",hideLightbox),sliderImg.addEventListener("click",function(){992<=window.innerWidth&&showLightbox()}),sliderArrowLeft.addEventListener("click",function(){swipePhotoLeft(sliderImg)}),sliderArrowRight.addEventListener("click",function(){swipePhotoRight(sliderImg)}),document.addEventListener("keydown",function(e){"Escape"===e.code&&hideLightbox()}),allLargeSliderThumbnails.forEach(function(e){e.addEventListener("click",changePhotoLightbox)}),largeSliderArrowLeft.addEventListener("click",function(){swipePhotoLeft(largeSliderImg)}),largeSliderArrowRight.addEventListener("click",function(){swipePhotoRight(largeSliderImg)}),navMobileBars.addEventListener("click",function(){animationInProgress?console.log("not so fast"):handleMobileNav()}),navMobileClose.addEventListener("click",function(){animationInProgress?console.log("not so fast"):handleMobileNav()}),navCartBtn.addEventListener("click",switchCart),countMinusBtn.addEventListener("click",function(){changeCountToAdd("-")}),countPlusBtn.addEventListener("click",function(){changeCountToAdd("+")}),addToCartBtn.addEventListener("click",addToCart),deleteBtn.addEventListener("click",deleteProducts);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJuYXZNb2JpbGVCYXJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmF2TW9iaWxlQ2xvc2UiLCJuYXZNb2JpbGUiLCJuYXZNb2JpbGVQYW5lbCIsInNsaWRlckltZyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzbGlkZXJBcnJvd0xlZnQiLCJzbGlkZXJBcnJvd1JpZ2h0IiwiYWxsVGh1bWJuYWlscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsYXJnZVNsaWRlciIsImxhcmdlU2xpZGVySW1nIiwibGFyZ2VTbGlkZXJBcnJvd0xlZnQiLCJsYXJnZVNsaWRlckFycm93UmlnaHQiLCJjYXJ0IiwiY291bnRQbHVzQnRuIiwiY291bnRNaW51c0J0biIsInByb2R1Y3RDb3VudCIsInByb2R1Y3RQcmljZSIsInRvdGFsUHJpY2UiLCJkZWxldGVCdG4iLCJjdXJyZW50UGhvdG9OdW0iLCJwcm9kdWN0c1RvQWRkIiwicHJvZHVjdHNBZGRlZCIsImFuaW1hdGlvbkluUHJvZ3Jlc3MiLCJoYW5kbGVNb2JpbGVOYXYiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzZXRUaW1lb3V0Iiwic3dpcGVQaG90b0xlZnQiLCJzbGlkZXIiLCJzZXRBdHRyaWJ1dGUiLCJzd2lwZVBob3RvUmlnaHQiLCJjb25zb2xlIiwiY29uY2F0IiwiY2hvc2VuVGh1bWJuYWlsIiwiZGlzcGxheVNlbGVjdGVkVGh1bWJuYWlsIiwiaSIsImFsbExhcmdlU2xpZGVyVGh1bWJuYWlscyIsInBhcmVudEVsZW1lbnQiLCJzZXREaXNwbGF5ZWRJbWciLCJ1cmwiLCJzaWduIiwiZSIsInRodW1ibmFpbCIsInRhcmdldCIsInByb2R1Y3RzVG9BZGREaXNwbGF5IiwiYWRkVG9DYXJ0IiwiYWRkIiwiY2FydENvdW50TnVtIiwidGV4dENvbnRlbnQiLCJkZWxldGVQcm9kdWN0cyIsInN3aXRjaENhcnQiLCJuYXZDYXJ0QnRuIiwic3R5bGUiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN1YnN0cmluZyIsImhpZGVMaWdodGJveCIsImlubmVyV2lkdGgiLCJyZW1vdmUiLCJsb2ciLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjaGFuZ2VQaG90byIsImFkZFRvQ2FydEJ0biIsIndpbmRvdyIsInNob3dMaWdodGJveCIsImNvZGUiLCJjaGFuZ2VQaG90b0xpZ2h0Ym94IiwiY2hhbmdlQ291bnRUb0FkZCJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxJQUFNQSxjQUFnQkMsU0FBU0MsY0FBYyxtQkFBb0IsRUFDM0RDLGVBQWlCRixTQUFTQyxjQUFjLG9CQUFxQixFQUM3REUsVUFBWUgsU0FBU0MsY0FBYyxjQUFlLEVBQ2xERyxlQUFpQkosU0FBU0MsY0FBYyxvQkFBcUIsRUFDN0RJLFVBQVlMLFNBQVNNLHVCQUF1QixZQUFjLEVBQUUsR0FDNURDLGdCQUFrQlAsU0FBU0MsY0FBYyxxQkFBc0IsRUFDL0RPLGlCQUFtQlIsU0FBU0MsY0FBYyxzQkFBdUIsRUFDakVRLGNBQWdCVCxTQUFTVSxpQkFBaUIsWUFBYSxFQUd2REMsT0FBV1gsU0FBR0EsY0FBU0MsU0FBYyxFQUNyQ1csWUFBY1osU0FBV0MsY0FBYyx5QkFBcUIsRUFDNURZLGVBQUFBLFNBQXVCYixjQUFTQyxtQkFDcEMsRUFFSWEscUJBQXdCZCxTQUFTQyxjQUd2QywyQkFDQSxFQUdNYyxzQkFBZ0JkLFNBQWNBLGNBQ3BDLDRCQUNBLEVBQ01lLGlCQUFlaEIsU0FBU0MsY0FBYyxxQkFBbUIsRUFDekRnQix5QkFBeUJoQixTQUFhUyxpQkFDNUMscUNBQ0EsRUFDTVEsS0FBQUEsU0FBZWxCLGNBQVNDLE9BQWMsRUFDdENrQixXQUFlbkIsU0FBU0MsY0FBYyxZQUFTLEVBQy9DbUIsYUFBYXBCLFNBQVNDLGNBQWMsV0FBZSxFQUNuRG9CLGFBQVlyQixTQUFTQyxjQUFjLGtCQUFBLEVBRXJDcUIsY0FBa0J0QixTQUFDQyxjQUFBLG1CQUFBLEVBQ25Cc0IscUJBQWlCdkIsU0FBQUMsY0FBQSxRQUFBLEVBQ2pCdUIsYUFBaUJ4QixT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QWEsRUFBN0NwQyxnQkFBZ0IsQ0FDekMsQ0FBQyxFQUVEeEIsZUFBZXVELGlCQUFpQixRQUFTLFdBQ3RDaEMsb0JBQTBDUyxRQUFRNEIsSUFBSSxhQUFhLEVBQTdDcEMsZ0JBQWdCLENBQ3pDLENBQUMsRUFDRDRCLFdBQVdHLGlCQUFpQixRQUFTSixVQUFVLEVBRS9DcEMsY0FBY3dDLGlCQUFpQixRQUFTLFdBQ3RDYSxpQkFBaUIsR0FBRyxDQUN0QixDQUFDLEVBRUR0RCxhQUFheUMsaUJBQWlCLFFBQVMsV0FDckNhLGlCQUFpQixHQUFHLENBQ3RCLENBQUMsRUFFREwsYUFBYVIsaUJBQWlCLFFBQVNULFNBQVMsRUFDaEQzQixVQUFVb0MsaUJBQWlCLFFBQVNMLGNBQWMiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY29uc3QgbmF2TW9iaWxlQmFycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19tb2JpbGUtYmFyc1wiKTtcclxuY29uc3QgbmF2TW9iaWxlQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbW9iaWxlLWNsb3NlXCIpO1xyXG5jb25zdCBuYXZNb2JpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbW9iaWxlXCIpO1xyXG5jb25zdCBuYXZNb2JpbGVQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19tb2JpbGUtcGFuZWxcIik7XHJcbmNvbnN0IHNsaWRlckltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzbGlkZXItaW1nXCIpWzBdO1xyXG5jb25zdCBzbGlkZXJBcnJvd0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlci1hcnJvdy0tbGVmdFwiKTtcclxuY29uc3Qgc2xpZGVyQXJyb3dSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyLWFycm93LS1yaWdodFwiKTtcclxuY29uc3QgYWxsVGh1bWJuYWlscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGh1bWJuYWlsXCIpO1xyXG5cclxuY29uc3Qgc2hhZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaGFkb3dcIik7XHJcbmNvbnN0IGxhcmdlU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXItbGFyZ2UtY29udGFpbmVyXCIpO1xyXG5jb25zdCBsYXJnZVNsaWRlckltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyLWxhcmdlLWltZ1wiKTtcclxuY29uc3QgbGFyZ2VTbGlkZXJBcnJvd0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnNsaWRlci1sYXJnZS1hcnJvdy0tbGVmdFwiXHJcbik7XHJcbmNvbnN0IGxhcmdlU2xpZGVyQXJyb3dSaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuc2xpZGVyLWxhcmdlLWFycm93LS1yaWdodFwiXHJcbik7XHJcbmNvbnN0IGxhcmdlU2xpZGVyQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlci1sYXJnZS1jbG9zZVwiKTtcclxuY29uc3QgYWxsTGFyZ2VTbGlkZXJUaHVtYm5haWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuICBcIi5zbGlkZXItbGFyZ2UtdGh1bWJuYWlscyAudGh1bWJuYWlsXCJcclxuKTtcclxuY29uc3QgY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FydFwiKTtcclxuY29uc3QgbmF2Q2FydEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2X19jYXJ0XCIpO1xyXG5jb25zdCBhZGRUb0NhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1jYXJ0XCIpO1xyXG5jb25zdCBjb3VudFBsdXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvdW50LWJ0bi0tcGx1c1wiKTtcclxuY29uc3QgY291bnRNaW51c0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY291bnQtYnRuLS1taW51c1wiKTtcclxuY29uc3QgcHJvZHVjdHNUb0FkZERpc3BsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvdW50XCIpO1xyXG5jb25zdCBjYXJ0Q291bnROdW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvdW50LW51bWJlclwiKTtcclxuY29uc3QgcHJvZHVjdENvdW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9kdWN0LWNvdW50XCIpO1xyXG5jb25zdCBwcm9kdWN0UHJpY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByaWNlXCIpO1xyXG5jb25zdCB0b3RhbFByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b3RhbC1wcmljZVwiKTtcclxuY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJ0LWZpbGxlZC11cHBlci10cmFzaFwiKTtcclxuXHJcbmxldCBjdXJyZW50UGhvdG9OdW0gPSAxO1xyXG5sZXQgcHJvZHVjdHNUb0FkZCA9IDA7XHJcbmxldCBwcm9kdWN0c0FkZGVkID0gMDtcclxubGV0IGFuaW1hdGlvbkluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHJcbmNvbnN0IGhhbmRsZU1vYmlsZU5hdiA9ICgpID0+IHtcclxuICBhbmltYXRpb25JblByb2dyZXNzID0gdHJ1ZTtcclxuICBuYXZNb2JpbGVCYXJzLmNsYXNzTGlzdC50b2dnbGUoXCJhbmltYXRlLXNwaW5cIik7XHJcbiAgbmF2TW9iaWxlQ2xvc2UuY2xhc3NMaXN0LnRvZ2dsZShcImFuaW1hdGUtc3BpblwiKTtcclxuICBuYXZNb2JpbGUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICBuYXZNb2JpbGVQYW5lbC5jbGFzc0xpc3QudG9nZ2xlKFwiYW5pbWF0ZS1zbGlkZVwiKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG5hdk1vYmlsZUJhcnMuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICAgIG5hdk1vYmlsZUNsb3NlLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBhbmltYXRpb25JblByb2dyZXNzID0gZmFsc2U7XHJcbiAgfSwgMzAwKTtcclxufTtcclxuXHJcbmNvbnN0IHN3aXBlUGhvdG9MZWZ0ID0gKHNsaWRlcikgPT4ge1xyXG4gIGN1cnJlbnRQaG90b051bS0tO1xyXG4gIGlmIChjdXJyZW50UGhvdG9OdW0gPT09IDApIHtcclxuICAgIGN1cnJlbnRQaG90b051bSA9IDQ7XHJcbiAgfVxyXG4gIHNsaWRlci5zZXRBdHRyaWJ1dGUoXHJcbiAgICBcInN0eWxlXCIsXHJcbiAgICBgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRpc3QvaW1nL2ltYWdlLXByb2R1Y3QtJHtjdXJyZW50UGhvdG9OdW19LmpwZylgXHJcbiAgKTtcclxufTtcclxuXHJcbmNvbnN0IHN3aXBlUGhvdG9SaWdodCA9IChzbGlkZXIpID0+IHtcclxuICBjdXJyZW50UGhvdG9OdW0rKztcclxuICBpZiAoY3VycmVudFBob3RvTnVtID09PSA1KSB7XHJcbiAgICBjdXJyZW50UGhvdG9OdW0gPSAxO1xyXG4gIH1cclxuICBzbGlkZXIuc2V0QXR0cmlidXRlKFxyXG4gICAgXCJzdHlsZVwiLFxyXG4gICAgYGJhY2tncm91bmQtaW1hZ2U6IHVybChkaXN0L2ltZy9pbWFnZS1wcm9kdWN0LSR7Y3VycmVudFBob3RvTnVtfS5qcGcpYFxyXG4gICk7XHJcbn07XHJcblxyXG5jb25zdCBkaXNwbGF5U2VsZWN0ZWRUaHVtYm5haWwgPSAoKSA9PiB7XHJcbiAgY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aHVtYm5haWw6Zm9jdXNcIikpO1xyXG59O1xyXG5cclxuY29uc3Qgc2V0RGlzcGxheWVkSW1nID0gKGNob3NlblRodW1ibmFpbCkgPT4ge1xyXG4gIGNob3NlblRodW1ibmFpbC51cmw7XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VQaG90byA9IChlKSA9PiB7XHJcbiAgYWxsVGh1bWJuYWlscy5mb3JFYWNoKCh0aHVtYm5haWwsIGkpID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgIGlmIChhbGxUaHVtYm5haWxzW2ldID09PSBlLnRhcmdldC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgc2xpZGVySW1nLnNldEF0dHJpYnV0ZShcclxuICAgICAgICAgIFwic3R5bGVcIixcclxuICAgICAgICAgIGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZGlzdC9pbWcvaW1hZ2UtcHJvZHVjdC0ke2kgKyAxfS5qcGcpYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY3VycmVudFBob3RvTnVtID0gaSArIDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGNoYW5nZVBob3RvTGlnaHRib3ggPSAoZSkgPT4ge1xyXG4gIGFsbExhcmdlU2xpZGVyVGh1bWJuYWlscy5mb3JFYWNoKCh0aHVtYm5haWwsIGkpID0+IHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgIGlmIChhbGxMYXJnZVNsaWRlclRodW1ibmFpbHNbaV0gPT09IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICBsYXJnZVNsaWRlckltZy5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICBgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRpc3QvaW1nL2ltYWdlLXByb2R1Y3QtJHtpICsgMX0uanBnKWBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VDb3VudFRvQWRkID0gKHNpZ24pID0+IHtcclxuICBpZiAoc2lnbiA9PT0gXCItXCIgJiYgcHJvZHVjdHNUb0FkZCAhPT0gMCkge1xyXG4gICAgcHJvZHVjdHNUb0FkZC0tO1xyXG4gIH0gZWxzZSBpZiAoc2lnbiA9PT0gXCIrXCIpIHtcclxuICAgIHByb2R1Y3RzVG9BZGQrKztcclxuICB9XHJcbiAgcHJvZHVjdHNUb0FkZERpc3BsYXkudGV4dENvbnRlbnQgPSBwcm9kdWN0c1RvQWRkO1xyXG59O1xyXG5cclxuY29uc3QgYWRkVG9DYXJ0ID0gKCkgPT4ge1xyXG4gIHByb2R1Y3RzQWRkZWQgKz0gcHJvZHVjdHNUb0FkZDtcclxuICBwcm9kdWN0c1RvQWRkID0gMDtcclxuICBwcm9kdWN0c1RvQWRkRGlzcGxheS50ZXh0Q29udGVudCA9IDA7XHJcbiAgaWYgKHByb2R1Y3RzQWRkZWQgPiAwKSB7XHJcbiAgICBjYXJ0LmNsYXNzTGlzdC5hZGQoXCJmaWxsZWRcIik7XHJcbiAgICBwcm9kdWN0Q291bnQudGV4dENvbnRlbnQgPSBwcm9kdWN0c0FkZGVkO1xyXG4gICAgdG90YWxQcmljZS50ZXh0Q29udGVudCA9IGAkJHtcclxuICAgICAgK3Byb2R1Y3RQcmljZS50ZXh0Q29udGVudC5zdWJzdHJpbmcoMSkgKiBwcm9kdWN0c0FkZGVkXHJcbiAgICB9LjAwYDtcclxuICAgIGNhcnRDb3VudE51bS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgY2FydENvdW50TnVtLnRleHRDb250ZW50ID0gcHJvZHVjdHNBZGRlZDtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBkZWxldGVQcm9kdWN0cyA9ICgpID0+IHtcclxuICBwcm9kdWN0c0FkZGVkID0gMDtcclxuICBjYXJ0LmNsYXNzTGlzdC5yZW1vdmUoXCJmaWxsZWRcIik7XHJcbn07XHJcblxyXG5jb25zdCBzd2l0Y2hDYXJ0RmlsbGVkID0gKCkgPT4ge1xyXG4gIGNhcnQuY2xhc3NMaXN0LnRvZ2dsZShcImZpbGxlZFwiKTtcclxuICBjb25zb2xlLmxvZyhcImR1cGFcIik7XHJcbn07XHJcblxyXG5jb25zdCBzd2l0Y2hDYXJ0ID0gKCkgPT4ge1xyXG4gIGNhcnQuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcclxuICBuYXZDYXJ0QnRuLmNsYXNzTGlzdC5hZGQoXCJhbmltYXRlLXB1bHNlXCIpO1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbmF2Q2FydEJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYW5pbWF0ZS1wdWxzZVwiKTtcclxuICB9LCAzMDApO1xyXG59O1xyXG5cclxuY29uc3Qgc2hvd0xpZ2h0Ym94ID0gKCkgPT4ge1xyXG4gIGxhcmdlU2xpZGVyLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgbGFyZ2VTbGlkZXJJbWcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYCB1cmwoZGlzdC9pbWcvaW1hZ2UtcHJvZHVjdC0ke2N1cnJlbnRQaG90b051bX0uanBnKWA7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlTGlnaHRib3ggPSAoKSA9PiB7XHJcbiAgbGFyZ2VTbGlkZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbmFsbFRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsKSA9PiB7XHJcbiAgdGh1bWJuYWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VQaG90byk7XHJcbn0pO1xyXG5cclxuc2hhZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlTGlnaHRib3gpO1xyXG5sYXJnZVNsaWRlckNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlTGlnaHRib3gpO1xyXG5zbGlkZXJJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTkyKSBzaG93TGlnaHRib3goKTtcclxufSk7XHJcbnNsaWRlckFycm93TGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHN3aXBlUGhvdG9MZWZ0KHNsaWRlckltZyk7XHJcbn0pO1xyXG5zbGlkZXJBcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc3dpcGVQaG90b1JpZ2h0KHNsaWRlckltZyk7XHJcbn0pO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gIGlmIChlLmNvZGUgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGhpZGVMaWdodGJveCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5hbGxMYXJnZVNsaWRlclRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsKSA9PiB7XHJcbiAgdGh1bWJuYWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VQaG90b0xpZ2h0Ym94KTtcclxufSk7XHJcbmxhcmdlU2xpZGVyQXJyb3dMZWZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc3dpcGVQaG90b0xlZnQobGFyZ2VTbGlkZXJJbWcpO1xyXG59KTtcclxubGFyZ2VTbGlkZXJBcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc3dpcGVQaG90b1JpZ2h0KGxhcmdlU2xpZGVySW1nKTtcclxufSk7XHJcblxyXG5uYXZNb2JpbGVCYXJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgIWFuaW1hdGlvbkluUHJvZ3Jlc3MgPyBoYW5kbGVNb2JpbGVOYXYoKSA6IGNvbnNvbGUubG9nKFwibm90IHNvIGZhc3RcIik7XHJcbn0pO1xyXG5cclxubmF2TW9iaWxlQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAhYW5pbWF0aW9uSW5Qcm9ncmVzcyA/IGhhbmRsZU1vYmlsZU5hdigpIDogY29uc29sZS5sb2coXCJub3Qgc28gZmFzdFwiKTtcclxufSk7XHJcbm5hdkNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN3aXRjaENhcnQpO1xyXG5cclxuY291bnRNaW51c0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNoYW5nZUNvdW50VG9BZGQoXCItXCIpO1xyXG59KTtcclxuXHJcbmNvdW50UGx1c0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNoYW5nZUNvdW50VG9BZGQoXCIrXCIpO1xyXG59KTtcclxuXHJcbmFkZFRvQ2FydEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkVG9DYXJ0KTtcclxuZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVQcm9kdWN0cyk7XHJcbiJdfQ==
