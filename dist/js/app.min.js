"use strict";var navMobileBars=document.querySelector(".nav__mobile-bars"),navMobileClose=document.querySelector(".nav__mobile-close"),navMobile=document.querySelector(".nav__mobile"),navMobilePanel=document.querySelector(".nav__mobile-panel"),sliderImg=document.getElementsByClassName("slider-img")[0],sliderArrowLeft=document.querySelector(".slider-arrow--left"),sliderArrowRight=document.querySelector(".slider-arrow--right"),allThumbnails=document.querySelectorAll(".thumbnail"),shadow=document.querySelector(".shadow"),largeSlider=document.querySelector(".slider-large-container"),largeSliderImg=document.querySelector(".slider-large-img"),largeSliderArrowLeft=document.querySelector(".slider-large-arrow--left"),largeSliderArrowRight=document.querySelector(".slider-large-arrow--right"),largeSliderClose=document.querySelector(".slider-large-close"),allLargeSliderThumbnails=document.querySelectorAll(".slider-large-thumbnails .thumbnail"),cart=document.querySelector(".cart"),navCartBtn=document.querySelector(".nav__cart"),addToCartBtn=document.querySelector(".btn-cart"),countPlusBtn=document.querySelector(".count-btn--plus"),countMinusBtn=document.querySelector(".count-btn--minus"),productsToAddDisplay=document.querySelector(".count"),cartCountNum=document.querySelector(".count-number"),productCount=document.querySelector(".product-count"),productPrice=document.querySelector(".price"),totalPrice=document.querySelector(".total-price"),deleteBtn=document.querySelector(".cart-filled-upper-trash"),currentPhotoNum=1,productsToAdd=0,productsAdded=0,animationInProgress=!1,handleMobileNav=function(){animationInProgress=!0,navMobileBars.classList.toggle("animate-spin"),navMobileClose.classList.toggle("animate-spin"),navMobile.classList.toggle("active"),navMobilePanel.classList.toggle("animate-slide"),setTimeout(function(){navMobileBars.classList.toggle("active"),navMobileClose.classList.toggle("active"),animationInProgress=!1},300)},swipePhotoLeft=function(e){0===--currentPhotoNum&&(currentPhotoNum=4),e.setAttribute("style","background-image: url(dist/img/image-product-".concat(currentPhotoNum,".jpg)")),e.classList.add("animate-photo-slide"),setTimeout(function(){e.classList.remove("animate-photo-slide")},500)},swipePhotoRight=function(e){5===++currentPhotoNum&&(currentPhotoNum=1),e.setAttribute("style","background-image: url(dist/img/image-product-".concat(currentPhotoNum,".jpg)")),e.classList.add("animate-photo-slide"),setTimeout(function(){e.classList.remove("animate-photo-slide")},500)},displaySelectedThumbnail=function(){console.log(document.querySelector(".thumbnail:focus"))},setDisplayedImg=function(e){e.url},changePhoto=function(r){allThumbnails.forEach(function(e,t){for(var o=0;o<4;o++)allThumbnails[o]===r.target.parentElement&&(sliderImg.setAttribute("style","background-image: url(dist/img/image-product-".concat(o+1,".jpg)")),currentPhotoNum=o+1)})},changePhotoLightbox=function(r){allLargeSliderThumbnails.forEach(function(e,t){for(var o=0;o<4;o++)allLargeSliderThumbnails[o]===r.target.parentElement&&largeSliderImg.setAttribute("style","background-image: url(dist/img/image-product-".concat(o+1,".jpg)"))})},changeCountToAdd=function(e){"-"===e&&0!==productsToAdd?productsToAdd--:"+"===e&&productsToAdd++,productsToAddDisplay.textContent=productsToAdd},addToCart=function(){productsAdded+=productsToAdd,productsToAdd=0,(productsToAddDisplay.textContent=0)<productsAdded&&(cart.classList.add("filled"),productCount.textContent=productsAdded,totalPrice.textContent="$".concat(+productPrice.textContent.substring(1)*productsAdded,".00"),cartCountNum.classList.add("active"),cartCountNum.textContent=productsAdded)},deleteProducts=function(){productsAdded=0,cart.classList.remove("filled")},switchCartFilled=function(){cart.classList.toggle("filled"),console.log("dupa")},switchCart=function(){cart.classList.toggle("active"),navCartBtn.classList.add("animate-pulse"),setTimeout(function(){navCartBtn.classList.remove("animate-pulse")},300)},switchLightBoxPhoto=function(e){largeSlider.classList.contains("active")&&("ArrowLeft"===e.code?swipePhotoLeft(largeSliderImg):"ArrowRight"===e.code&&swipePhotoRight(largeSliderImg))},showLightbox=function(){largeSlider.classList.add("active"),largeSliderImg.style.backgroundImage=" url(dist/img/image-product-".concat(currentPhotoNum,".jpg)")},hideLightbox=function(){largeSlider.classList.remove("active")};allThumbnails.forEach(function(e){e.addEventListener("click",changePhoto)}),shadow.addEventListener("click",hideLightbox),largeSliderClose.addEventListener("click",hideLightbox),sliderImg.addEventListener("click",function(){992<=window.innerWidth&&showLightbox()}),sliderArrowLeft.addEventListener("click",function(){swipePhotoLeft(sliderImg)}),sliderArrowRight.addEventListener("click",function(){swipePhotoRight(sliderImg)}),document.addEventListener("keydown",function(e){"Escape"===e.code&&hideLightbox()}),document.addEventListener("keydown",switchLightBoxPhoto),allLargeSliderThumbnails.forEach(function(e){e.addEventListener("click",changePhotoLightbox)}),largeSliderArrowLeft.addEventListener("click",function(){swipePhotoLeft(largeSliderImg)}),largeSliderArrowRight.addEventListener("click",function(){swipePhotoRight(largeSliderImg)}),navMobileBars.addEventListener("click",function(){animationInProgress?console.log("not so fast"):handleMobileNav()}),navMobileClose.addEventListener("click",function(){animationInProgress?console.log("not so fast"):handleMobileNav()}),navCartBtn.addEventListener("click",switchCart),countMinusBtn.addEventListener("click",function(){changeCountToAdd("-")}),countPlusBtn.addEventListener("click",function(){changeCountToAdd("+")}),addToCartBtn.addEventListener("click",addToCart),deleteBtn.addEventListener("click",deleteProducts);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJuYXZNb2JpbGVCYXJzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibmF2TW9iaWxlQ2xvc2UiLCJuYXZNb2JpbGUiLCJuYXZNb2JpbGVQYW5lbCIsInNsaWRlckltZyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzbGlkZXJBcnJvd0xlZnQiLCJzbGlkZXJBcnJvd1JpZ2h0IiwiYWxsVGh1bWJuYWlscyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsYXJnZVNsaWRlciIsImxhcmdlU2xpZGVySW1nIiwibGFyZ2VTbGlkZXJBcnJvd0xlZnQiLCJsYXJnZVNsaWRlckFycm93UmlnaHQiLCJjYXJ0IiwiY291bnRQbHVzQnRuIiwiY291bnRNaW51c0J0biIsInByb2R1Y3RDb3VudCIsInByb2R1Y3RQcmljZSIsInRvdGFsUHJpY2UiLCJkZWxldGVCdG4iLCJjdXJyZW50UGhvdG9OdW0iLCJwcm9kdWN0c1RvQWRkIiwicHJvZHVjdHNBZGRlZCIsImFuaW1hdGlvbkluUHJvZ3Jlc3MiLCJoYW5kbGVNb2JpbGVOYXYiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJzZXRUaW1lb3V0Iiwic3dpcGVQaG90b0xlZnQiLCJzbGlkZXIiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmUiLCJkaXNwbGF5U2VsZWN0ZWRUaHVtYm5haWwiLCJzZXREaXNwbGF5ZWRJbWciLCJjaG9zZW5UaHVtYm5haWwiLCJjaGFuZ2VQaG90byIsImFkZCIsImkiLCJjb25zb2xlIiwiYWxsTGFyZ2VTbGlkZXJUaHVtYm5haWxzIiwicGFyZW50RWxlbWVudCIsInVybCIsInNpZ24iLCJlIiwidGh1bWJuYWlsIiwidGFyZ2V0IiwicHJvZHVjdHNUb0FkZERpc3BsYXkiLCJhZGRUb0NhcnQiLCJjYXJ0Q291bnROdW0iLCJ0ZXh0Q29udGVudCIsImRlbGV0ZVByb2R1Y3RzIiwic3dpdGNoQ2FydCIsIm5hdkNhcnRCdG4iLCJjb2RlIiwic2hvd0xpZ2h0Ym94IiwiY29uY2F0Iiwic3Vic3RyaW5nIiwiaGlkZUxpZ2h0Ym94IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNoYWRvdyIsImxhcmdlU2xpZGVyQ2xvc2UiLCJ3aW5kb3ciLCJzd2lwZVBob3RvUmlnaHQiLCJmb3JFYWNoIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhZGRUb0NhcnRCdG4iLCJpbm5lcldpZHRoIiwic3dpdGNoTGlnaHRCb3hQaG90byIsImNoYW5nZVBob3RvTGlnaHRib3giLCJsb2ciLCJjaGFuZ2VDb3VudFRvQWRkIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQU1BLGNBQWdCQyxTQUFTQyxjQUFjLG1CQUFvQixFQUMzREMsZUFBaUJGLFNBQVNDLGNBQWMsb0JBQXFCLEVBQzdERSxVQUFZSCxTQUFTQyxjQUFjLGNBQWUsRUFDbERHLGVBQWlCSixTQUFTQyxjQUFjLG9CQUFxQixFQUM3REksVUFBWUwsU0FBU00sdUJBQXVCLFlBQWMsRUFBRSxHQUM1REMsZ0JBQWtCUCxTQUFTQyxjQUFjLHFCQUFzQixFQUMvRE8saUJBQW1CUixTQUFTQyxjQUFjLHNCQUF1QixFQUNqRVEsY0FBZ0JULFNBQVNVLGlCQUFpQixZQUFhLEVBR3ZEQyxPQUFXWCxTQUFHQSxjQUFTQyxTQUFjLEVBQ3JDVyxZQUFjWixTQUFXQyxjQUFjLHlCQUFxQixFQUM1RFksZUFBQUEsU0FBdUJiLGNBQVNDLG1CQUNwQyxFQUVJYSxxQkFBd0JkLFNBQVNDLGNBR3ZDLDJCQUNBLEVBR01jLHNCQUFnQmQsU0FBY0EsY0FDcEMsNEJBQ0EsRUFDTWUsaUJBQWVoQixTQUFTQyxjQUFjLHFCQUFtQixFQUN6RGdCLHlCQUF5QmhCLFNBQWFTLGlCQUM1QyxxQ0FDQSxFQUNNUSxLQUFBQSxTQUFlbEIsY0FBU0MsT0FBYyxFQUN0Q2tCLFdBQWVuQixTQUFTQyxjQUFjLFlBQVMsRUFDL0NtQixhQUFhcEIsU0FBU0MsY0FBYyxXQUFlLEVBQ25Eb0IsYUFBWXJCLFNBQVNDLGNBQWMsa0JBQUEsRUFFckNxQixjQUFrQnRCLFNBQUNDLGNBQUEsbUJBQUEsRUFDbkJzQixxQkFBaUJ2QixTQUFBQyxjQUFBLFFBQUEsRUFDakJ1QixhQUFpQnhCLFNBQUFDLGNBQUEsZUFBQSxFQUNqQndCLGFBQUFBLFNBQXNCeEIsY0FBSyxnQkFBQSxFQUV6QnlCLGFBQWUxQixTQUFHQyxjQUFsQnlCLFFBQXdCLEVBQzVCRCxXQUFBQSxTQUEwQnhCLGNBQUEsY0FBQSxFQUMxQkYsVUFBYzRCLFNBQVVDLGNBQU8sMEJBQWUsRUFFOUN6QixnQkFBb0J5QixFQUNwQnhCLGNBQWV1QixFQUNmRSxjQUFXLEVBQ1Q5QixvQkFBYzRCLENBQUFBLEVBRWRGLGdCQUFtQixXQUNyQkEsb0JBQU8sQ0FBQSxFQUNSMUIsY0FBQTRCLFVBQUFDLE9BQUEsY0FBQSxFQUVEMUIsZUFBTTRCLFVBQWlCRixPQUFqQkUsY0FBa0JDLEVBQ3RCVCxVQUFBQSxVQUFpQk0sT0FBQSxRQUFBLEVBQ2pCeEIsZUFBSWtCLFVBQXFCTSxPQUFFLGVBQUEsRUFUM0JDLFdBVUVQLFdBQ0Z2QixjQUFBNEIsVUFBQUMsT0FBQSxRQUFBLEVBQ0FHLGVBQU9DLFVBQ0VKLE9BQUEsUUFBQSxFQUdURyxvQkFBcUIsQ0FBQSxDQUNyQkYsRUFBQUEsR0FBQUEsQ0FaRixFQWVDQyxlQUFBLFNBQUFDLEdBR2tCLElBRG5CVCxFQUFBQSxrQkFFRUEsZ0JBQW1CLEdBRW5CUyxFQUFBQyxhQUNBRCxRQUFPQyxnREFBQUEsT0FJb0NWLGdCQUFBLE9BQUEsQ0FDM0NPLEVBaEJBRSxFQWlCRUEsVUFBT0osSUFBVU0scUJBQU8sRUFDMUJKLFdBQU8sV0FDUkUsRUFBQUosVUFBQU0sT0FBQSxxQkFBQSxDQUVELEVBQU1DLEdBQUFBLENBakJOLEVBcUJNQyxnQkFBa0IsU0FBQUosR0FFdkIsSUFEQ0ssRUFBQUEsa0JBR0lDLGdCQUFjLEdBbEJsQk4sRUFvQk9DLGFBbkJMLFFBb0JNdkIsZ0RBQUFBLE9BRU9hLGdCQUFBLE9BQUEsQ0FwQmYsRUFDQVMsRUF1QklKLFVBQUFXLElBQUEscUJBQUEsRUF0QkpULFdBdUJFLFdBQ0FFLEVBQUFKLFVBQUFNLE9BQUEscUJBQUEsQ0FDSCxFQUFBLEdBQUEsQ0FFRCxFQUVJQyx5QkFBdUJLLFdBdkJ6QkMsUUF3QlFDLElBQUFBLFNBQUFBLGNBQXlCRixrQkFBZ0JHLENBQUFBLENBdkJuRCxFQTZCSVAsZ0JBQUEsU0FBQUMsR0FDRkEsRUFBRU8sR0FDSixFQUdNQyxZQUFZLFNBQUFDLEdBM0JoQnBDLGNBNEJFYyxRQUFlLFNBQUF1QixFQUFBUCxHQUNoQixJQUFNLElBQUlLLEVBQUksRUFBQUwsRUFBSyxFQUFLQSxDQUFBLEdBQ3ZCaEIsY0FBZWdCLEtBQUFNLEVBQUFFLE9BQUFMLGdCQUNqQnJDLFVBQUEyQixhQUNBZ0IsUUFBQUEsZ0RBQUFBLE9BQ0RULEVBQUEsRUFBQSxPQUFBLENBRUtVLEVBQ0p6QixnQkFBaUJELEVBQUFBLEVBR2pCLENBQUEsQ0E1QkYsRUErQklILG9CQUFzQixTQUFBeUIsR0E1QnhCSix5QkErQnlCSCxRQUFJLFNBQUFRLEVBQVNQLEdBQ3BDVyxJQUFBQSxJQUFBQSxFQUFhQyxFQUFBQSxFQUFBQSxFQUFBQSxDQUFXLEdBQzFCVix5QkFBQUYsS0FBQU0sRUFBQUUsT0FBQUwsZUFDRDlCLGVBQUFvQixhQUVLb0IsUUFBQUEsZ0RBQUFBLE9BQ2FiLEVBQUEsRUFBQSxPQUFBLENBQ1paLENBSUxaLENBQUFBLENBaENGLEVBb0NNc0MsaUJBQWEsU0FBYkEsR0FDQzFCLE1BQURpQixHQUEyQixJQUFoQmhCLGNBQ2YwQixhQUFXM0IsR0FDQSxNQUFBaUIsR0FDVFUsYUFBVzNCLEdBRWRxQixxQkFBQUcsWUFBQTVCLGFBRUQsRUFFSTBCLFVBQVUsV0FsQ1p6QixlQW1DSU0sY0FsQ0pQLGNBbUNlZ0MsR0FsQ2ZQLHFCQW1Db0JwQyxZQUFlLEdBQ2pDWSxnQkFDRlQsS0FBQVksVUFBQVcsSUFBQSxRQUFBLEVBQ0RwQixhQUFBaUMsWUFBQTNCLGNBRUtnQyxXQUFBQSxZQUFlLElBQUFDLE9BQ25COUMsQ0FBQUEsYUFBWWdCLFlBQWMrQixVQUFTLENBQUEsRUFBQWxDLGNBQUEsS0FBQSxFQUVwQzBCLGFBQUF2QixVQUFBVyxJQUFBLFFBQUEsRUFFS3FCLGFBQVlSLFlBQVpRLGNBRU4sRUFHRWIsZUFBVWMsV0FDVnBDLGNBQUEsRUFFRnFDLEtBQU9ELFVBQUFBLE9BQWlCLFFBQU8sQ0FDL0JFLEVBRU1DLGlCQUFpQixXQUNyQmhELEtBQUFZLFVBQUFDLE9BQUEsUUFBQSxFQUNGckIsUUFBQUEsSUFBQUEsTUFBZ0JxRCxDQXRDaEIsRUF5Q0FwRCxXQUFpQm9ELFdBQ2ZJLEtBQUFBLFVBQWVwQyxPQUFDdkIsUUFBVSxFQUMxQmlELFdBQUEzQixVQUFBVyxJQUFBLGVBQUEsRUFDRnRDLFdBQVM0RCxXQUNQTixXQUFVM0IsVUFBYU0sT0FBRSxlQUFBLENBdEN6QixFQXVDRTBCLEdBQUFBLENBdENKLEVBeUNBM0Qsb0JBQTBCLFNBQUE2QyxHQUMxQkosWUFBQUEsVUFBeUJ3QixTQUFRLFFBQUNuQixJQUN0QmMsY0FBVmQsRUFBQUEsS0FDQWhCLGVBQUFsQixjQUFBLEVBQ21CZ0QsZUFBckIvQyxFQUFBQSxNQUNFaUIsZ0JBQWVsQixjQUFlLEVBcENoQyxFQTBDQWIsYUFBYzZELFdBQ1pqRCxZQUFDYyxVQUFtQmEsSUFBR1osUUFBQUEsRUFDdkJkLGVBQUFzRCxNQUFBQyxnQkFBQSwrQkFBQVYsT0FBQW5DLGdCQUFBLE9BQUEsQ0FFRnBCLEVBRUV5RCxhQUFBLFdBQ0ZMLFlBQVdNLFVBQUFBLE9BQWlCLFFBQVNQLENBRXJDcEMsRUFFQVIsY0FBRXdELFFBQUEsU0FBQW5CLEdBRUY5QixFQUFZNEMsaUJBQWlCLFFBQVF2QixXQUFFLENBMUN2QyxDQUFDLEVBOENEK0IsT0FBQUEsaUJBQWFSLFFBQWlCRCxZQUFTVixFQUN2QzVCLGlCQUFVdUMsaUJBQXdCLFFBQUVSLFlBQWUsRUEzQ25EL0MsVUFBVXVELGlCQUFpQixRQUFTLFdBQ1QsS0FBckJHLE9BQU9NLFlBQW1CYixhQUFhLENBQzdDLENBQUMsRUFDRGpELGdCQUFnQnFELGlCQUFpQixRQUFTLFdBQ3hDOUIsZUFBZXpCLFNBQVMsQ0FDMUIsQ0FBQyxFQUNERyxpQkFBaUJvRCxpQkFBaUIsUUFBUyxXQUN6Q0ksZ0JBQWdCM0QsU0FBUyxDQUMzQixDQUFDLEVBQ0RMLFNBQVM0RCxpQkFBaUIsVUFBVyxTQUFDZixHQUNyQixXQUFYQSxFQUFFVSxNQUNKSSxhQUFhLENBRWpCLENBQUMsRUFDRDNELFNBQVM0RCxpQkFBaUIsVUFBV1UsbUJBQW1CLEVBQ3hEN0IseUJBQXlCd0IsUUFBUSxTQUFDbkIsR0FDaENBLEVBQVVjLGlCQUFpQixRQUFTVyxtQkFBbUIsQ0FDekQsQ0FBQyxFQUNEMUQscUJBQXFCK0MsaUJBQWlCLFFBQVMsV0FDN0M5QixlQUFlbEIsY0FBYyxDQUMvQixDQUFDLEVBQ0RFLHNCQUFzQjhDLGlCQUFpQixRQUFTLFdBQzlDSSxnQkFBZ0JwRCxjQUFjLENBQ2hDLENBQUMsRUFFRGIsY0FBYzZELGlCQUFpQixRQUFTLFdBQ3JDbkMsb0JBQTBDZSxRQUFRZ0MsSUFBSSxhQUFhLEVBQTdDOUMsZ0JBQWdCLENBQ3pDLENBQUMsRUFFRHhCLGVBQWUwRCxpQkFBaUIsUUFBUyxXQUN0Q25DLG9CQUEwQ2UsUUFBUWdDLElBQUksYUFBYSxFQUE3QzlDLGdCQUFnQixDQUN6QyxDQUFDLEVBQ0Q0QixXQUFXTSxpQkFBaUIsUUFBU1AsVUFBVSxFQUUvQ3BDLGNBQWMyQyxpQkFBaUIsUUFBUyxXQUN0Q2EsaUJBQWlCLEdBQUcsQ0FDdEIsQ0FBQyxFQUVEekQsYUFBYTRDLGlCQUFpQixRQUFTLFdBQ3JDYSxpQkFBaUIsR0FBRyxDQUN0QixDQUFDLEVBRURMLGFBQWFSLGlCQUFpQixRQUFTWCxTQUFTLEVBQ2hENUIsVUFBVXVDLGlCQUFpQixRQUFTUixjQUFjIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IG5hdk1vYmlsZUJhcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbW9iaWxlLWJhcnNcIik7XHJcbmNvbnN0IG5hdk1vYmlsZUNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX21vYmlsZS1jbG9zZVwiKTtcclxuY29uc3QgbmF2TW9iaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX21vYmlsZVwiKTtcclxuY29uc3QgbmF2TW9iaWxlUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbW9iaWxlLXBhbmVsXCIpO1xyXG5jb25zdCBzbGlkZXJJbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2xpZGVyLWltZ1wiKVswXTtcclxuY29uc3Qgc2xpZGVyQXJyb3dMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXItYXJyb3ctLWxlZnRcIik7XHJcbmNvbnN0IHNsaWRlckFycm93UmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlci1hcnJvdy0tcmlnaHRcIik7XHJcbmNvbnN0IGFsbFRodW1ibmFpbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRodW1ibmFpbFwiKTtcclxuXHJcbmNvbnN0IHNoYWRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hhZG93XCIpO1xyXG5jb25zdCBsYXJnZVNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyLWxhcmdlLWNvbnRhaW5lclwiKTtcclxuY29uc3QgbGFyZ2VTbGlkZXJJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlci1sYXJnZS1pbWdcIik7XHJcbmNvbnN0IGxhcmdlU2xpZGVyQXJyb3dMZWZ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5zbGlkZXItbGFyZ2UtYXJyb3ctLWxlZnRcIlxyXG4pO1xyXG5jb25zdCBsYXJnZVNsaWRlckFycm93UmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnNsaWRlci1sYXJnZS1hcnJvdy0tcmlnaHRcIlxyXG4pO1xyXG5jb25zdCBsYXJnZVNsaWRlckNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXItbGFyZ2UtY2xvc2VcIik7XHJcbmNvbnN0IGFsbExhcmdlU2xpZGVyVGh1bWJuYWlscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXHJcbiAgXCIuc2xpZGVyLWxhcmdlLXRodW1ibmFpbHMgLnRodW1ibmFpbFwiXHJcbik7XHJcbmNvbnN0IGNhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcnRcIik7XHJcbmNvbnN0IG5hdkNhcnRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fY2FydFwiKTtcclxuY29uc3QgYWRkVG9DYXJ0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tY2FydFwiKTtcclxuY29uc3QgY291bnRQbHVzQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3VudC1idG4tLXBsdXNcIik7XHJcbmNvbnN0IGNvdW50TWludXNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvdW50LWJ0bi0tbWludXNcIik7XHJcbmNvbnN0IHByb2R1Y3RzVG9BZGREaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3VudFwiKTtcclxuY29uc3QgY2FydENvdW50TnVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3VudC1udW1iZXJcIik7XHJcbmNvbnN0IHByb2R1Y3RDb3VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZHVjdC1jb3VudFwiKTtcclxuY29uc3QgcHJvZHVjdFByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmljZVwiKTtcclxuY29uc3QgdG90YWxQcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG90YWwtcHJpY2VcIik7XHJcbmNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FydC1maWxsZWQtdXBwZXItdHJhc2hcIik7XHJcblxyXG5sZXQgY3VycmVudFBob3RvTnVtID0gMTtcclxubGV0IHByb2R1Y3RzVG9BZGQgPSAwO1xyXG5sZXQgcHJvZHVjdHNBZGRlZCA9IDA7XHJcbmxldCBhbmltYXRpb25JblByb2dyZXNzID0gZmFsc2U7XHJcblxyXG5jb25zdCBoYW5kbGVNb2JpbGVOYXYgPSAoKSA9PiB7XHJcbiAgYW5pbWF0aW9uSW5Qcm9ncmVzcyA9IHRydWU7XHJcbiAgbmF2TW9iaWxlQmFycy5jbGFzc0xpc3QudG9nZ2xlKFwiYW5pbWF0ZS1zcGluXCIpO1xyXG4gIG5hdk1vYmlsZUNsb3NlLmNsYXNzTGlzdC50b2dnbGUoXCJhbmltYXRlLXNwaW5cIik7XHJcbiAgbmF2TW9iaWxlLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgbmF2TW9iaWxlUGFuZWwuY2xhc3NMaXN0LnRvZ2dsZShcImFuaW1hdGUtc2xpZGVcIik7XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICBuYXZNb2JpbGVCYXJzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICBuYXZNb2JpbGVDbG9zZS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xyXG4gICAgYW5pbWF0aW9uSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG4gIH0sIDMwMCk7XHJcbn07XHJcblxyXG5jb25zdCBzd2lwZVBob3RvTGVmdCA9IChzbGlkZXIpID0+IHtcclxuICBjdXJyZW50UGhvdG9OdW0tLTtcclxuICBpZiAoY3VycmVudFBob3RvTnVtID09PSAwKSB7XHJcbiAgICBjdXJyZW50UGhvdG9OdW0gPSA0O1xyXG4gIH1cclxuICBzbGlkZXIuc2V0QXR0cmlidXRlKFxyXG4gICAgXCJzdHlsZVwiLFxyXG4gICAgYGJhY2tncm91bmQtaW1hZ2U6IHVybChkaXN0L2ltZy9pbWFnZS1wcm9kdWN0LSR7Y3VycmVudFBob3RvTnVtfS5qcGcpYFxyXG4gICk7XHJcbiAgc2xpZGVyLmNsYXNzTGlzdC5hZGQoXCJhbmltYXRlLXBob3RvLXNsaWRlXCIpO1xyXG4gIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgc2xpZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJhbmltYXRlLXBob3RvLXNsaWRlXCIpO1xyXG4gIH0sIDUwMCk7XHJcbn07XHJcblxyXG5jb25zdCBzd2lwZVBob3RvUmlnaHQgPSAoc2xpZGVyKSA9PiB7XHJcbiAgY3VycmVudFBob3RvTnVtKys7XHJcbiAgaWYgKGN1cnJlbnRQaG90b051bSA9PT0gNSkge1xyXG4gICAgY3VycmVudFBob3RvTnVtID0gMTtcclxuICB9XHJcbiAgc2xpZGVyLnNldEF0dHJpYnV0ZShcclxuICAgIFwic3R5bGVcIixcclxuICAgIGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoZGlzdC9pbWcvaW1hZ2UtcHJvZHVjdC0ke2N1cnJlbnRQaG90b051bX0uanBnKWBcclxuICApO1xyXG4gIHNsaWRlci5jbGFzc0xpc3QuYWRkKFwiYW5pbWF0ZS1waG90by1zbGlkZVwiKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIHNsaWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiYW5pbWF0ZS1waG90by1zbGlkZVwiKTtcclxuICB9LCA1MDApO1xyXG59O1xyXG5cclxuY29uc3QgZGlzcGxheVNlbGVjdGVkVGh1bWJuYWlsID0gKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGh1bWJuYWlsOmZvY3VzXCIpKTtcclxufTtcclxuXHJcbmNvbnN0IHNldERpc3BsYXllZEltZyA9IChjaG9zZW5UaHVtYm5haWwpID0+IHtcclxuICBjaG9zZW5UaHVtYm5haWwudXJsO1xyXG59O1xyXG5cclxuY29uc3QgY2hhbmdlUGhvdG8gPSAoZSkgPT4ge1xyXG4gIGFsbFRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsLCBpKSA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICBpZiAoYWxsVGh1bWJuYWlsc1tpXSA9PT0gZS50YXJnZXQucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgIHNsaWRlckltZy5zZXRBdHRyaWJ1dGUoXHJcbiAgICAgICAgICBcInN0eWxlXCIsXHJcbiAgICAgICAgICBgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRpc3QvaW1nL2ltYWdlLXByb2R1Y3QtJHtpICsgMX0uanBnKWBcclxuICAgICAgICApO1xyXG4gICAgICAgIGN1cnJlbnRQaG90b051bSA9IGkgKyAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGFuZ2VQaG90b0xpZ2h0Ym94ID0gKGUpID0+IHtcclxuICBhbGxMYXJnZVNsaWRlclRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsLCBpKSA9PiB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICBpZiAoYWxsTGFyZ2VTbGlkZXJUaHVtYm5haWxzW2ldID09PSBlLnRhcmdldC5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgbGFyZ2VTbGlkZXJJbWcuc2V0QXR0cmlidXRlKFxyXG4gICAgICAgICAgXCJzdHlsZVwiLFxyXG4gICAgICAgICAgYGJhY2tncm91bmQtaW1hZ2U6IHVybChkaXN0L2ltZy9pbWFnZS1wcm9kdWN0LSR7aSArIDF9LmpwZylgXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgY2hhbmdlQ291bnRUb0FkZCA9IChzaWduKSA9PiB7XHJcbiAgaWYgKHNpZ24gPT09IFwiLVwiICYmIHByb2R1Y3RzVG9BZGQgIT09IDApIHtcclxuICAgIHByb2R1Y3RzVG9BZGQtLTtcclxuICB9IGVsc2UgaWYgKHNpZ24gPT09IFwiK1wiKSB7XHJcbiAgICBwcm9kdWN0c1RvQWRkKys7XHJcbiAgfVxyXG4gIHByb2R1Y3RzVG9BZGREaXNwbGF5LnRleHRDb250ZW50ID0gcHJvZHVjdHNUb0FkZDtcclxufTtcclxuXHJcbmNvbnN0IGFkZFRvQ2FydCA9ICgpID0+IHtcclxuICBwcm9kdWN0c0FkZGVkICs9IHByb2R1Y3RzVG9BZGQ7XHJcbiAgcHJvZHVjdHNUb0FkZCA9IDA7XHJcbiAgcHJvZHVjdHNUb0FkZERpc3BsYXkudGV4dENvbnRlbnQgPSAwO1xyXG4gIGlmIChwcm9kdWN0c0FkZGVkID4gMCkge1xyXG4gICAgY2FydC5jbGFzc0xpc3QuYWRkKFwiZmlsbGVkXCIpO1xyXG4gICAgcHJvZHVjdENvdW50LnRleHRDb250ZW50ID0gcHJvZHVjdHNBZGRlZDtcclxuICAgIHRvdGFsUHJpY2UudGV4dENvbnRlbnQgPSBgJCR7XHJcbiAgICAgICtwcm9kdWN0UHJpY2UudGV4dENvbnRlbnQuc3Vic3RyaW5nKDEpICogcHJvZHVjdHNBZGRlZFxyXG4gICAgfS4wMGA7XHJcbiAgICBjYXJ0Q291bnROdW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIGNhcnRDb3VudE51bS50ZXh0Q29udGVudCA9IHByb2R1Y3RzQWRkZWQ7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgZGVsZXRlUHJvZHVjdHMgPSAoKSA9PiB7XHJcbiAgcHJvZHVjdHNBZGRlZCA9IDA7XHJcbiAgY2FydC5jbGFzc0xpc3QucmVtb3ZlKFwiZmlsbGVkXCIpO1xyXG59O1xyXG5cclxuY29uc3Qgc3dpdGNoQ2FydEZpbGxlZCA9ICgpID0+IHtcclxuICBjYXJ0LmNsYXNzTGlzdC50b2dnbGUoXCJmaWxsZWRcIik7XHJcbiAgY29uc29sZS5sb2coXCJkdXBhXCIpO1xyXG59O1xyXG5cclxuY29uc3Qgc3dpdGNoQ2FydCA9ICgpID0+IHtcclxuICBjYXJ0LmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgbmF2Q2FydEJ0bi5jbGFzc0xpc3QuYWRkKFwiYW5pbWF0ZS1wdWxzZVwiKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIG5hdkNhcnRCdG4uY2xhc3NMaXN0LnJlbW92ZShcImFuaW1hdGUtcHVsc2VcIik7XHJcbiAgfSwgMzAwKTtcclxufTtcclxuXHJcbmNvbnN0IHN3aXRjaExpZ2h0Qm94UGhvdG8gPSAoZSkgPT4ge1xyXG4gIGlmIChsYXJnZVNsaWRlci5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuICAgIGlmIChlLmNvZGUgPT09IFwiQXJyb3dMZWZ0XCIpIHtcclxuICAgICAgc3dpcGVQaG90b0xlZnQobGFyZ2VTbGlkZXJJbWcpO1xyXG4gICAgfSBlbHNlIGlmIChlLmNvZGUgPT09IFwiQXJyb3dSaWdodFwiKSB7XHJcbiAgICAgIHN3aXBlUGhvdG9SaWdodChsYXJnZVNsaWRlckltZyk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3Qgc2hvd0xpZ2h0Ym94ID0gKCkgPT4ge1xyXG4gIGxhcmdlU2xpZGVyLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgbGFyZ2VTbGlkZXJJbWcuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYCB1cmwoZGlzdC9pbWcvaW1hZ2UtcHJvZHVjdC0ke2N1cnJlbnRQaG90b051bX0uanBnKWA7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlTGlnaHRib3ggPSAoKSA9PiB7XHJcbiAgbGFyZ2VTbGlkZXIuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxufTtcclxuXHJcbmFsbFRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsKSA9PiB7XHJcbiAgdGh1bWJuYWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VQaG90byk7XHJcbn0pO1xyXG5cclxuc2hhZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlTGlnaHRib3gpO1xyXG5sYXJnZVNsaWRlckNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoaWRlTGlnaHRib3gpO1xyXG5zbGlkZXJJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gOTkyKSBzaG93TGlnaHRib3goKTtcclxufSk7XHJcbnNsaWRlckFycm93TGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHN3aXBlUGhvdG9MZWZ0KHNsaWRlckltZyk7XHJcbn0pO1xyXG5zbGlkZXJBcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc3dpcGVQaG90b1JpZ2h0KHNsaWRlckltZyk7XHJcbn0pO1xyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gIGlmIChlLmNvZGUgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGhpZGVMaWdodGJveCgpO1xyXG4gIH1cclxufSk7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHN3aXRjaExpZ2h0Qm94UGhvdG8pO1xyXG5hbGxMYXJnZVNsaWRlclRodW1ibmFpbHMuZm9yRWFjaCgodGh1bWJuYWlsKSA9PiB7XHJcbiAgdGh1bWJuYWlsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjaGFuZ2VQaG90b0xpZ2h0Ym94KTtcclxufSk7XHJcbmxhcmdlU2xpZGVyQXJyb3dMZWZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc3dpcGVQaG90b0xlZnQobGFyZ2VTbGlkZXJJbWcpO1xyXG59KTtcclxubGFyZ2VTbGlkZXJBcnJvd1JpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgc3dpcGVQaG90b1JpZ2h0KGxhcmdlU2xpZGVySW1nKTtcclxufSk7XHJcblxyXG5uYXZNb2JpbGVCYXJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgIWFuaW1hdGlvbkluUHJvZ3Jlc3MgPyBoYW5kbGVNb2JpbGVOYXYoKSA6IGNvbnNvbGUubG9nKFwibm90IHNvIGZhc3RcIik7XHJcbn0pO1xyXG5cclxubmF2TW9iaWxlQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAhYW5pbWF0aW9uSW5Qcm9ncmVzcyA/IGhhbmRsZU1vYmlsZU5hdigpIDogY29uc29sZS5sb2coXCJub3Qgc28gZmFzdFwiKTtcclxufSk7XHJcbm5hdkNhcnRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHN3aXRjaENhcnQpO1xyXG5cclxuY291bnRNaW51c0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNoYW5nZUNvdW50VG9BZGQoXCItXCIpO1xyXG59KTtcclxuXHJcbmNvdW50UGx1c0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNoYW5nZUNvdW50VG9BZGQoXCIrXCIpO1xyXG59KTtcclxuXHJcbmFkZFRvQ2FydEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkVG9DYXJ0KTtcclxuZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBkZWxldGVQcm9kdWN0cyk7XHJcbiJdfQ==
